<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ëª¨í‹°ì½˜ ì§ë§ì¶”ê¸° ê²Œì„</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        .header {
            margin-bottom: 20px;
            text-align: center;
        }
        .info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
        }
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .game-board {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            margin-bottom: 20px;
            max-width: 600px;
        }
        .card {
            width: 50px;
            height: 50px;
            background-color: #3498db;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 20px;
            color: transparent;
            transition: all 0.3s ease;
            user-select: none;
        }
        .card.flipped {
            transform: rotateY(180deg);
            color: white;
        }
        .card.matched {
            visibility: hidden;
        }
        .controls {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
        }
        button:hover {
            background-color: #27ae60;
        }
        .win-message {
            font-size: 24px;
            font-weight: bold;
            color: #2ecc71;
            margin-top: 20px;
            display: none;
        }
        #difficulty {
            padding: 8px;
            font-size: 16px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ì´ëª¨í‹°ì½˜ ì§ë§ì¶”ê¸° ê²Œì„</h1>
        <p>ê°™ì€ ì´ëª¨í‹°ì½˜ ì§ì„ ì°¾ì•„ ëª¨ë“  ì¹´ë“œë¥¼ ì—†ì• ë³´ì„¸ìš”!</p>
    </div>
    
    <div class="info">
        <div>
            <p>ì‹œë„ íšŸìˆ˜: <span id="attempts">0</span></p>
        </div>
        <div>
            <p>ë‚¨ì€ ì§: <span id="remaining-pairs">0</span></p>
        </div>
        <div>
            <p>ì‹œê°„: <span id="timer">00:00</span></p>
        </div>
    </div>
    
    <div class="game-container">
        <div class="controls">
            <select id="difficulty">
                <option value="4">ì´ˆê¸‰ (4x4)</option>
                <option value="6">ì¤‘ê¸‰ (6x6)</option>
                <option value="8">ê³ ê¸‰ (8x8)</option>
                <option value="10" selected>ì „ë¬¸ê°€ (10x10)</option>
            </select>
            <button id="new-game-btn">ìƒˆ ê²Œì„</button>
        </div>
        
        <div class="game-board" id="game-board"></div>
        
        <div class="win-message" id="win-message">
            ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  ì§ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!
        </div>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let gameBoard = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let totalPairs = 0;
        let attempts = 0;
        let canFlip = true;
        let gameStarted = false;
        let timerInterval;
        let startTime;
        let gridSize = 10; // ê¸°ë³¸ ê·¸ë¦¬ë“œ í¬ê¸° (10x10)
        
        // ì´ëª¨í‹°ì½˜ ëª©ë¡
        const emojis = [
            'ğŸ˜€', 'ğŸ˜', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜…', 'ğŸ˜†', 'ğŸ˜‰', 'ğŸ˜Š', 
            'ğŸ˜‹', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™', 'ğŸ˜š', 'ğŸ™‚', 'ğŸ¤—', 'ğŸ¤©',
            'ğŸ¤”', 'ğŸ¤¨', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¶', 'ğŸ™„', 'ğŸ˜', 'ğŸ˜£', 'ğŸ˜¥', 'ğŸ˜®',
            'ğŸ¤', 'ğŸ˜¯', 'ğŸ˜ª', 'ğŸ˜«', 'ğŸ˜´', 'ğŸ˜Œ', 'ğŸ˜›', 'ğŸ˜œ', 'ğŸ˜', 'ğŸ¤¤',
            'ğŸ˜’', 'ğŸ˜“', 'ğŸ˜”', 'ğŸ˜•', 'ğŸ™ƒ', 'ğŸ¤‘', 'ğŸ˜²', 'â˜¹ï¸', 'ğŸ™', 'ğŸ˜–',
            'ğŸ˜', 'ğŸ˜Ÿ', 'ğŸ˜¤', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜¨', 'ğŸ˜©', 'ğŸ¤¯',
            'ğŸ˜¬', 'ğŸ˜°', 'ğŸ˜±', 'ğŸ˜³', 'ğŸ¤ª', 'ğŸ˜µ', 'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ¤¬', 'ğŸ˜·',
            'ğŸ¤’', 'ğŸ¤•', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤§', 'ğŸ˜‡', 'ğŸ¤ ', 'ğŸ¤¡', 'ğŸ¤¥', 'ğŸ¤«',
            'ğŸ¤­', 'ğŸ§', 'ğŸ¤“', 'ğŸ˜ˆ', 'ğŸ‘¿', 'ğŸ‘¹', 'ğŸ‘º', 'ğŸ’€', 'ğŸ‘»', 'ğŸ‘½',
            'ğŸ¤–', 'ğŸ’©', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½', 'ğŸ™€', 'ğŸ˜¿',
            'ğŸ¶', 'ğŸ±', 'ğŸ­', 'ğŸ¹', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸ¯',
            'ğŸ¦', 'ğŸ®', 'ğŸ·', 'ğŸ¸', 'ğŸµ', 'ğŸ™ˆ', 'ğŸ™‰', 'ğŸ™Š', 'ğŸ”', 'ğŸ§',
            'ğŸ¦', 'ğŸ¤', 'ğŸ£', 'ğŸ¦†', 'ğŸ¦…', 'ğŸ¦‰', 'ğŸ¦‡', 'ğŸº', 'ğŸ—', 'ğŸ´',
            'ğŸ¦„', 'ğŸ', 'ğŸ›', 'ğŸ¦‹', 'ğŸŒ', 'ğŸ', 'ğŸœ', 'ğŸ¦Ÿ', 'ğŸ¦—', 'ğŸ•·ï¸',
            'ğŸ¦‚', 'ğŸ¢', 'ğŸ', 'ğŸ¦', 'ğŸ¦–', 'ğŸ¦•', 'ğŸ™', 'ğŸ¦‘', 'ğŸ¦', 'ğŸ¦',
            'ğŸ¦€', 'ğŸ¡', 'ğŸ ', 'ğŸŸ', 'ğŸ¬', 'ğŸ³', 'ğŸ‹', 'ğŸ¦ˆ', 'ğŸŠ', 'ğŸ…',
            'ğŸ†', 'ğŸ¦“', 'ğŸ¦', 'ğŸ¦§', 'ğŸ˜', 'ğŸ¦›', 'ğŸ¦', 'ğŸª', 'ğŸ«', 'ğŸ¦’',
            'ğŸ¦˜', 'ğŸƒ', 'ğŸ‚', 'ğŸ„', 'ğŸ', 'ğŸ–', 'ğŸ', 'ğŸ‘', 'ğŸ¦™', 'ğŸ',
            'ğŸ¦Œ', 'ğŸ•', 'ğŸ©', 'ğŸ¦®', 'ğŸ•â€ğŸ¦º', 'ğŸˆ', 'ğŸ“', 'ğŸ¦ƒ', 'ğŸ¦š', 'ğŸ¦œ',
            'ğŸ¦¢', 'ğŸ¦©', 'ğŸ•Šï¸', 'ğŸ‡', 'ğŸ¦', 'ğŸ¦¨', 'ğŸ¦¡', 'ğŸ¦¦', 'ğŸ¦¥', 'ğŸ'
        ];

        // DOM ìš”ì†Œ
        const gameBoardElement = document.getElementById('game-board');
        const attemptsElement = document.getElementById('attempts');
        const remainingPairsElement = document.getElementById('remaining-pairs');
        const timerElement = document.getElementById('timer');
        const newGameButton = document.getElementById('new-game-btn');
        const winMessageElement = document.getElementById('win-message');
        const difficultySelect = document.getElementById('difficulty');

        // ê²Œì„ ì´ˆê¸°í™”
        function initGame() {
            gameBoard = [];
            flippedCards = [];
            matchedPairs = 0;
            attempts = 0;
            canFlip = true;
            gameStarted = false;
            clearInterval(timerInterval);
            timerElement.textContent = '00:00';
            attemptsElement.textContent = '0';
            winMessageElement.style.display = 'none';
            
            // ê·¸ë¦¬ë“œ í¬ê¸° ì„¤ì •
            gridSize = parseInt(difficultySelect.value);
            totalPairs = Math.floor((gridSize * gridSize) / 2);
            remainingPairsElement.textContent = totalPairs;
            
            // ê²Œì„ë³´ë“œ ìƒì„±
            createGameBoard();
        }

        // ê²Œì„ë³´ë“œ ìƒì„±
        function createGameBoard() {
            // ê²Œì„ë³´ë“œ HTML ì´ˆê¸°í™”
            gameBoardElement.innerHTML = '';
            gameBoardElement.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
            
            // ì¹´ë“œ ìƒì„±
            const totalCards = gridSize * gridSize;
            const selectedEmojis = getRandomEmojis(totalPairs);
            const cards = [...selectedEmojis, ...selectedEmojis];
            
            // ì¹´ë“œ ì„ê¸°
            shuffleArray(cards);
            
            // ê²Œì„ë³´ë“œì— ì¹´ë“œ ì¶”ê°€
            for (let i = 0; i < totalCards; i++) {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.index = i;
                card.textContent = cards[i];
                
                // ì¹´ë“œ ë°°ê²½ìƒ‰ ëœë¤í™”
                card.style.backgroundColor = getRandomColor();
                
                card.addEventListener('click', flipCard);
                gameBoardElement.appendChild(card);
                gameBoard.push({
                    emoji: cards[i],
                    flipped: false,
                    matched: false
                });
            }
        }

        // ëœë¤ ì´ëª¨í‹°ì½˜ ì„ íƒ
        function getRandomEmojis(count) {
            const shuffledEmojis = [...emojis];
            shuffleArray(shuffledEmojis);
            return shuffledEmojis.slice(0, count);
        }

        // ë°°ì—´ ì„ê¸° (Fisher-Yates ì•Œê³ ë¦¬ì¦˜)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ëœë¤ ìƒ‰ìƒ ìƒì„±
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // ì¹´ë“œ ë’¤ì§‘ê¸°
        function flipCard() {
            if (!canFlip) return;
            
            const index = parseInt(this.dataset.index);
            
            // ì´ë¯¸ ë’¤ì§‘íŒ ì¹´ë“œë‚˜ ë§¤ì¹˜ëœ ì¹´ë“œëŠ” ë¬´ì‹œ
            if (gameBoard[index].flipped || gameBoard[index].matched) return;
            
            // ê²Œì„ ì‹œì‘ ì²´í¬
            if (!gameStarted) {
                startGame();
            }
            
            // ì¹´ë“œ ë’¤ì§‘ê¸°
            gameBoard[index].flipped = true;
            this.classList.add('flipped');
            flippedCards.push({index, element: this});
            
            // ë‘ ì¥ì˜ ì¹´ë“œê°€ ë’¤ì§‘í˜”ì„ ë•Œ ì²´í¬
            if (flippedCards.length === 2) {
                attempts++;
                attemptsElement.textContent = attempts;
                
                const [card1, card2] = flippedCards;
                
                // ì§ì´ ë§ëŠ”ì§€ í™•ì¸
                if (gameBoard[card1.index].emoji === gameBoard[card2.index].emoji) {
                    // ì§ì´ ë§ìŒ
                    matchedPairs++;
                    remainingPairsElement.textContent = totalPairs - matchedPairs;
                    
                    setTimeout(() => {
                        card1.element.classList.add('matched');
                        card2.element.classList.add('matched');
                        gameBoard[card1.index].matched = true;
                        gameBoard[card2.index].matched = true;
                        
                        flippedCards = [];
                        
                        // ê²Œì„ ì¢…ë£Œ í™•ì¸
                        if (matchedPairs === totalPairs) {
                            endGame();
                        }
                    }, 500);
                } else {
                    // ì§ì´ ë§ì§€ ì•ŠìŒ
                    canFlip = false;
                    setTimeout(() => {
                        card1.element.classList.remove('flipped');
                        card2.element.classList.remove('flipped');
                        gameBoard[card1.index].flipped = false;
                        gameBoard[card2.index].flipped = false;
                        
                        flippedCards = [];
                        canFlip = true;
                    }, 1000);
                }
            }
        }

        // ê²Œì„ ì‹œì‘
        function startGame() {
            gameStarted = true;
            startTime = new Date();
            timerInterval = setInterval(updateTimer, 1000);
        }

        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
            const currentTime = new Date();
            const elapsedTime = Math.floor((currentTime - startTime) / 1000);
            const minutes = Math.floor(elapsedTime / 60);
            const seconds = elapsedTime % 60;
            timerElement.textContent = `${padZero(minutes)}:${padZero(seconds)}`;
        }

        // ìˆ«ì ì•ì— 0 ë¶™ì´ê¸°
        function padZero(num) {
            return num < 10 ? `0${num}` : num;
        }

        // ê²Œì„ ì¢…ë£Œ
        function endGame() {
            clearInterval(timerInterval);
            winMessageElement.style.display = 'block';
        }

        // ìƒˆ ê²Œì„ ë²„íŠ¼ ì´ë²¤íŠ¸
        newGameButton.addEventListener('click', initGame);
        
        // ë‚œì´ë„ ë³€ê²½ ì´ë²¤íŠ¸
        difficultySelect.addEventListener('change', initGame);
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²Œì„ ì´ˆê¸°í™”
        initGame();
    </script>
</body>
</html>
